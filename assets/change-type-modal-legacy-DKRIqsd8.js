!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./chakra-legacy-VViCoECn.js","./index-legacy-BFXaXDur.js","./react-legacy-DopGR7tC.js","./master-manager-legacy-BrQoMTu8.js"],(function(e,n){"use strict";var r,a,s,i,o,l,c,u,d,g,h,p,y,b,m,f,j,S,v,O,x,C,A,T,E,w,P,L,N,k,I,z,B,D,F,M,R,W,q;return{setters:[e=>{r=e.j,a=e.ag,s=e.M,i=e.ah,o=e.J,l=e.N,c=e.K,u=e.L,d=e.aG,g=e.aH,h=e.aI,p=e.B,y=e.aJ,b=e.aK,m=e.O,f=e.t},e=>{j=e.S,S=e.d,v=e.at,O=e.o,x=e.m,C=e.l,A=e.c,T=e.e,E=e.q,w=e.t,P=e.v,L=e.C,N=e.M,k=e.L,I=e.U,z=e.Q,B=e.R,D=e.V,F=e.i},e=>{M=e.u,R=e.b},e=>{W=e.s,q=e.u}],execute:function(){const n=[j.ShmetroBasic2020,j.LondonTubeBasic,j.ShanghaiSuburbanRailway];e("b",((e,r,a)=>{const s=e.getNodeAttribute(r,"type"),i=structuredClone(e.getNodeAttribute(r,s).names);for(let t=0;t<Math.abs(W[a].defaultAttrs.names.length-i.length);t++)W[a].defaultAttrs.names.length>i.length?i.push("Stn"):i.pop();const o=t(t({},W[a].defaultAttrs),{},{names:i});Object.values(n).includes(s)&&Object.values(n).includes(a)||(o.nameOffsetX=e.getNodeAttribute(r,s).nameOffsetX,o.nameOffsetY=e.getNodeAttribute(r,s).nameOffsetY),S.has(a)&&S.has(s)&&(o.color=structuredClone(e.getNodeAttribute(r,s).color)),e.removeNodeAttribute(r,s),e.mergeNodeAttributes(r,{type:a,[a]:o})})),e("c",((e,t,n,r)=>{const a=e.getEdgeAttribute(t,"type"),s=e.getEdgeAttribute(t,"style");if(v[s].metadata.supportLinePathType.includes(n)){const s=structuredClone(O[n].defaultAttrs);let i=-1;if(r){const[r,a]=e.extremities(t),o=s.startFrom;i=x(e,n,r,a,o)}e.setEdgeAttribute(t,"parallelIndex",i),e.removeEdgeAttribute(t,a),e.mergeEdgeAttributes(t,{type:n,[n]:s})}})),e("a",((e,t,n,r)=>{const a=e.getEdgeAttribute(t,"type"),s=e.getEdgeAttribute(t,"style");if(console.log(v[n].metadata.supportLinePathType),v[n].metadata.supportLinePathType.includes(a)){const a=e.getEdgeAttribute(t,"zIndex"),i=e.getEdgeAttribute(t,s);e.removeEdgeAttribute(t,s);const o=structuredClone(v[n].defaultAttrs);S.has(s)&&S.has(n)?o.color=i.color:S.has(n)&&r&&(o.color=r),e.mergeEdgeAttributes(t,{style:n,[n]:o}),n===C.River?e.setEdgeAttribute(t,"zIndex",-5):e.setEdgeAttribute(t,"zIndex",null!=a?a:0)}})),e("C",(e=>{const{isOpen:n,onClose:S,isSelect:x,filter:H}=e,{t:J}=M(),K=A(),{selected:X}=T((e=>e.runtime)),{preference:{autoParallel:Y}}=T((e=>e.app)),{activeSubscriptions:Z}=T((e=>e.account));R.useCallback((()=>{K(E(G.current.export())),K(w()),K(P())}),[K,w,P,E]);const G=R.useRef(window.graph),Q=t({any:J("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(O).map((([e,t])=>[e,J(t.metadata.displayName).toString()])))),U=t({any:J("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(v).map((([e,t])=>[e,J(t.metadata.displayName).toString()])))),V=t({any:J("header.settings.procedures.changeType.any")},Object.fromEntries(Object.entries(W).map((([e,t])=>[e,J(t.metadata.displayName).toString()])))),_={id:"any",theme:[L.Other,"other","#ffffff",N.black],value:J("header.settings.procedures.changeType.any")},[$,ee]=R.useState(!1),[te,ne]=R.useState(0),[re,ae]=R.useState(!1),[se,ie]=R.useState("any"),[oe,le]=R.useState(j.ShmetroBasic),[ce,ue]=R.useState(!1),[de,ge]=R.useState("any"),[he,pe]=R.useState(C.SingleColor),[ye,be]=R.useState(!1),[me,fe]=R.useState("any"),[je,Se]=R.useState(k.Diagonal),[ve,Oe]=R.useState(!1),[xe,Ce]=R.useState(_),{theme:Ae,requestThemeChange:Te}=I(),[Ee,we]=R.useState([]),Pe=[{id:"changeZIndex",title:J("header.settings.procedures.changeZIndex"),onClose:()=>ee(!$),field:[{type:"select",label:J("panel.details.info.zIndex"),value:te,options:Object.fromEntries(Array.from({length:11},((e,t)=>[t-5,(t-5).toString()]))),onChange:e=>ne(Number(e))}]},{id:"changeStationType",title:J("header.settings.procedures.changeStationType.title"),onClose:()=>ae(!re),field:[{type:"select",label:J("header.settings.procedures.changeStationType.changeFrom"),options:V,value:se,onChange:e=>ie(e)},{type:"select",label:J("header.settings.procedures.changeStationType.changeTo"),options:V,value:oe,onChange:e=>le(e)}]},{id:"changeLineStyleType",title:J("header.settings.procedures.changeLineStyleType.title"),onClose:()=>ue(!ce),field:[{type:"select",label:J("header.settings.procedures.changeLineStyleType.changeFrom"),options:U,value:de,onChange:e=>ge(e)},{type:"select",label:J("header.settings.procedures.changeLineStyleType.changeTo"),options:U,value:he,onChange:e=>pe(e)}]},{id:"changeLinePathType",title:J("header.settings.procedures.changeLinePathType.title"),onClose:()=>be(!ye),field:[{type:"select",label:J("header.settings.procedures.changeLinePathType.changeFrom"),options:Q,value:me,onChange:e=>fe(e)},{type:"select",label:J("header.settings.procedures.changeLinePathType.changeTo"),options:Q,value:je,onChange:e=>Se(e)}]},{id:"changeColor",title:J("header.settings.procedures.changeColor.title"),onClose:()=>Oe(!ve),field:[{type:"custom",label:J("header.settings.procedures.changeColor.changeFrom"),component:r.jsx(z,{data:Ee,displayHandler:e=>r.jsx(B,{name:e.value,fg:e.theme[3],bg:e.theme[2],title:e.theme[1],sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"}}),filter:(e,t)=>t.id.toLowerCase().includes(e.toLowerCase())||Object.values(t.id).some((t=>t.toLowerCase().includes(e.toLowerCase()))),value:xe.value,onChange:e=>Ce(e)})},{type:"custom",label:J("header.settings.procedures.changeColor.changeTo"),component:r.jsx(D,{theme:Ae,onClick:Te})}]}];return R.useEffect((()=>{n&&(ee(!1),ae(!1),ue(!1),be(!1),Oe(!1),ne(0),we([_,...q(G.current,x?[...X].filter((e=>e.startsWith("stn")||e.startsWith("misc_node"))):G.current.nodes(),x?[...X].filter((e=>e.startsWith("line"))):G.current.edges()).map((e=>({id:e.toString(),theme:e,value:"other"===e[1]?e[2]:e[1]})))]),Ce(_))}),[n]),r.jsxs(a,{isOpen:n,onClose:S,size:"md",scrollBehavior:"inside",children:[r.jsx(s,{}),r.jsxs(i,{children:[r.jsxs(o,{children:[r.jsx(l,{as:"b",fontSize:"xl",children:J(x?"panel.details.multipleSelection.change":"header.settings.procedures.changeType.title")}),r.jsx(c,{})]}),r.jsx(u,{children:r.jsx(d,{allowMultiple:!0,children:Pe.map((e=>r.jsxs(g,{children:[r.jsxs(h,{onClick:e.onClose,children:[r.jsx(p,{as:"span",flex:"1",textAlign:"left",children:r.jsx(l,{as:"b",fontSize:"md",children:e.title})}),r.jsx(y,{})]}),r.jsx(b,{pb:4,children:r.jsx(F,{fields:e.field,minW:270})})]},e.id)))})}),r.jsx(m,{children:r.jsx(f,{colorScheme:"blue",variant:"outline",mr:"1",onClick:S,children:J("cancel")})})]})]})}))}}}))}();
